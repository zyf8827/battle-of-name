# 姓名大作战

这是一个简单的回合制格斗游戏，角色的属性由他们的名字决定。该游戏使用 Vue.js 和 TypeScript 构建。

## 技术栈

- **前端**: Vue.js 3 (使用组合式 API 和 `<script setup>`)
- **构建工具**: Vite
- **样式**: Tailwind CSS
- **语言**: TypeScript

## 代码架构

该项目在 UI 上遵循基于组件的架构，游戏逻辑和表示层之间的关注点清晰分离。

- **`src/components`**: 包含负责渲染不同游戏屏幕（`StartScreen`、`BattleScreen`、`SettlementScreen`）的可重用 Vue 组件。这些组件被设计为无状态的，并以 props 的形式接收所有必要的数据。
- **`src/game`**: 该目录包含核心游戏逻辑，与 UI 完全解耦。这种分离使得游戏机制的测试和维护更加容易。
  - **`types.ts`**: 游戏中使用的所有数据结构的唯一真实来源。它定义了 `Character`、`Career`、`Item`、`Equipment`、`BattleState` 等接口。
  - **`characterGenerator.ts`**: 负责创建新的 `Character` 对象。它使用角色的名字作为 `seedrandom` 库的种子，以确保相同的名字总是产生相同的属性和职业，从而使角色生成具有确定性。
  - **`battleEngine.ts`**: 游戏的核心。它管理整个战斗流程，从初始化到确定获胜者。它是一个状态机，可以在回合的不同阶段（事件阶段、行动阶段、回合结束阶段）之间转换。
  - **`definitions/`**: 该子目录采用数据驱动的方法来定义游戏内容。游戏的每个方面（职业、物品、装备、事件）都在其自己的文件中定义，每个目录中的 `index.ts` 文件汇总了所有定义。这使得在不修改核心游戏逻辑的情况下添加新内容变得非常容易。

## 核心游戏引擎 (`battleEngine.ts`)

战斗引擎被实现为回合制系统。以下是其执行流程的细分：

1.  **初始化 (`createBattleState`)**: 创建初始的 `BattleState` 对象，其中包括两个玩家的角色、战斗日志和种子随机数生成器。
2.  **战斗循环 (`startBattle`)**: 只要两个玩家的生命值都大于 0，主循环就会继续。
3.  **回合结构**: 每个回合包括以下阶段：
    a.  **事件阶段**: 在回合开始时触发随机事件。
    b.  **行动阶段**: 当前玩家可以选择使用物品或攻击对手。
    c.  **回合结束阶段**: 解析状态效果并更新其持续时间。
4.  **属性计算 (`getModifiedStat`)**: 此函数通过获取基础属性并应用装备和状态效果的修饰符来计算角色的最终属性。
5.  **战斗结算**: 当一个角色攻击时，引擎会根据攻击者的攻击力和防御者的防御力计算伤害。它还会考虑暴击。
6.  **胜利条件**: 当一个玩家的生命值降至或低于零时，战斗结束。另一个玩家被宣布为获胜者。

## 内容定义

所有游戏内容都使用 `src/game/definitions/` 目录中一致的数据驱动方法来定义。这种设计模式使游戏具有高度的可扩展性。

- **`Career`**: 由具有 `id`、`name`、`description` 以及可选的 `modifiers` 和 `hooks` 的对象定义。`modifiers` 直接改变角色的属性，而 `hooks` 则通过接入战斗的不同阶段（例如 `onTurnStart`、`onBeforeAttack`）来实现更复杂的逻辑。
- **`Item`**: 由具有 `id`、`name`、`description` 和实现物品效果的 `use` 方法的对象定义。
- **`Equipment`**: 由具有 `id`、`name`、`description`、`type`（武器、盔甲或饰品）和指定其提供的属性加成的 `stats` 对象的对象定义。
- **`GameEvent`**: 由具有 `id`、`name`、`description` 和允许事件在战斗的特定时间点（例如 `onTurnStart`）触发动作的 `hooks` 对象的对象定义。

## 命名约定

游戏的命名风格幽默，大量借鉴了网络迷因、流行文化和极客文化。这体现在职业（“摸鱼大师”、“键盘侠”）、物品（“肥宅快乐水”、“神秘U盘”）和装备（“传说中的咸鱼”、“程序员的格子衫”）的名称中。这种一致的主题有助于营造游戏轻松有趣的基调。游戏中的各类命名可以增加emoji增加趣味性。